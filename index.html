<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="None">
  
  <link rel="shortcut icon" href="img/favicon.ico">
  <title>Home - Tomo</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="css/theme.css" type="text/css" />
  <link rel="stylesheet" href="css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
  <link href="css/extra.css" rel="stylesheet">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Home";
    var mkdocs_page_input_path = "index.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="js/jquery-2.1.1.min.js" defer></script>
  <script src="js/modernizr-2.8.3.min.js" defer></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="." class="icon icon-home"> Tomo</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="./search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1 current">
		
    <a class="current" href=".">Home</a>
    <ul class="subnav">
            
    <li class="toctree-l2"><a href="#tomo">Tomo</a></li>
    
        <ul>
        
            <li><a class="toctree-l3" href="#quick-start">Quick start</a></li>
        
            <li><a class="toctree-l3" href="#usage">Usage</a></li>
        
            <li><a class="toctree-l3" href="#tutorials">Tutorials</a></li>
        
            <li><a class="toctree-l3" href="#reference-documentation">Reference documentation</a></li>
        
            <li><a class="toctree-l3" href="#faq">FAQ</a></li>
        
            <li><a class="toctree-l3" href="#support">Support</a></li>
        
            <li><a class="toctree-l3" href="#license">License</a></li>
        
            <li><a class="toctree-l3" href="#code-of-conduct">Code of conduct</a></li>
        
            <li><a class="toctree-l3" href="#contribution-guide">Contribution guide</a></li>
        
        </ul>
    

    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="configuration/">Configuration</a>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Commands</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="commands/init/">init</a>
                </li>
                <li class="">
                    
    <a class="" href="commands/setup/">setup</a>
                </li>
                <li class="">
                    
    <a class="" href="commands/deploy/">deploy</a>
                </li>
                <li class="">
                    
    <a class="" href="commands/run/">run</a>
                </li>
                <li class="">
                    
    <a class="" href="commands/tasks/">tasks</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Plugins</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="plugins/core/">core</a>
                </li>
                <li class="">
                    
    <a class="" href="plugins/bundler/">bundler</a>
                </li>
                <li class="">
                    
    <a class="" href="plugins/env/">env</a>
                </li>
                <li class="">
                    
    <a class="" href="plugins/git/">git</a>
                </li>
                <li class="">
                    
    <a class="" href="plugins/nodenv/">nodenv</a>
                </li>
                <li class="">
                    
    <a class="" href="plugins/puma/">puma</a>
                </li>
                <li class="">
                    
    <a class="" href="plugins/rails/">rails</a>
                </li>
                <li class="">
                    
    <a class="" href="plugins/rbenv/">rbenv</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Tutorials</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="tutorials/deploying-rails-from-scratch/">Deploying Rails From Scratch</a>
                </li>
                <li class="">
                    
    <a class="" href="tutorials/writing-custom-tasks/">Writing Custom Tasks</a>
                </li>
                <li class="">
                    
    <a class="" href="tutorials/publishing-a-plugin/">Publishing a Plugin</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">API</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="api/Host/">Tomo::Host</a>
                </li>
                <li class="">
                    
    <a class="" href="api/Logger/">Tomo::Logger</a>
                </li>
                <li class="">
                    
    <a class="" href="api/Paths/">Tomo::Paths</a>
                </li>
                <li class="">
                    
    <a class="" href="api/PluginDSL/">Tomo::PluginDSL</a>
                </li>
                <li class="">
                    
    <a class="" href="api/Remote/">Tomo::Remote</a>
                </li>
                <li class="">
                    
    <a class="" href="api/Result/">Tomo::Result</a>
                </li>
                <li class="">
                    
    <a class="" href="api/TaskLibrary/">Tomo::TaskLibrary</a>
                </li>
                <li class="">
                    
    <a class="" href="api/testing/MockPluginTester/">Tomo::Testing::MockPluginTester</a>
                </li>
                <li class="">
                    
    <a class="" href="api/testing/DockerPluginTester/">Tomo::Testing::DockerPluginTester</a>
                </li>
    </ul>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href=".">Tomo</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".">Docs</a> &raquo;</li>
    
      
    
    <li>Home</li>
    <li class="wy-breadcrumbs-aside">
      
          <a href="https://github.com/mattbrictson/tomo/edit/master/README.md" class="icon icon-github"
          > Edit on GitHub</a>
      
    </li>
  </ul>
  
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="tomo">Tomo</h1>
<p><a href="https://rubygems.org/gems/tomo"><img alt="Gem Version" src="https://badge.fury.io/rb/tomo.svg" /></a>
<a href="https://travis-ci.org/mattbrictson/tomo"><img alt="Travis" src="https://img.shields.io/travis/mattbrictson/tomo.svg?label=travis" /></a>
<a href="https://circleci.com/gh/mattbrictson/tomo"><img alt="Circle" src="https://circleci.com/gh/mattbrictson/tomo.svg?style=shield" /></a>
<a href="https://codeclimate.com/github/mattbrictson/tomo"><img alt="Code Climate" src="https://codeclimate.com/github/mattbrictson/tomo/badges/gpa.svg" /></a></p>
<p>Tomo is a friendly command-line tool for deploying Rails apps. It is a new alternative to Capistrano, Mina, and Shipit that aims for simplicity and developer happiness.</p>
<p>üíª Rich command-line interface with built-in bash completions<br/>
‚òÅÔ∏è Multi-environment and role-based multi-host support<br/>
üíé Everything you need to deploy a basic Rails app out of the box<br/>
üîå Easily extensible for polyglot projects (not just Rails!)<br/>
üí° Concise, helpful error messages<br/>
üìö Quality documentation<br/>
üî¨ Minimal dependencies<br/></p>
<hr />
<ul>
<li><a href="#quick-start">Quick start</a></li>
<li><a href="#usage">Usage</a></li>
<li><a href="#tutorials">Tutorials</a></li>
<li><a href="#reference-documentation">Reference documentation</a></li>
<li><a href="#faq">FAQ</a></li>
<li><a href="#support">Support</a></li>
<li><a href="#license">License</a></li>
<li><a href="#code-of-conduct">Code of conduct</a></li>
<li><a href="#contribution-guide">Contribution guide</a></li>
</ul>
<h2 id="quick-start">Quick start</h2>
<p>Tomo is distributed as a ruby gem. To install:</p>
<pre><code>$ gem install tomo
</code></pre>

<p>For instructions on setting up bash completions, run:</p>
<pre><code>$ tomo completion-script
</code></pre>

<h4 id="configuring-a-project">Configuring a project</h4>
<p>Tomo is configured via a <code>.tomo/config.rb</code> file in your project. To get started, you can use <code>tomo init</code> to generate a configuration that works for a basic Rails app.</p>
<p><img alt="$ tomo init" src="readme_images/tomo-init.png" /></p>
<p>An abbreviated version looks like this:</p>
<pre><code class="ruby"># .tomo/config.rb

plugin &quot;git&quot;
plugin &quot;bundler&quot;
plugin &quot;rails&quot;
# ...

host &quot;user@hostname.or.ip.address&quot;

set application: &quot;my-rails-app&quot;
set deploy_to: &quot;/var/www/%{application}&quot;
set git_url: &quot;git@github.com:my-username/my-rails-app.git&quot;
set git_branch: &quot;master&quot;
# ...

setup do
  run &quot;git:clone&quot;
  run &quot;git:create_release&quot;
  run &quot;bundler:install&quot;
  run &quot;rails:db_schema_load&quot;
  # ...
end

deploy do
  run &quot;git:create_release&quot;
  run &quot;core:symlink_shared&quot;
  run &quot;core:write_release_json&quot;
  run &quot;bundler:install&quot;
  run &quot;rails:assets_precompile&quot;
  run &quot;rails:db_migrate&quot;
  run &quot;core:symlink_current&quot;
  # ...
end
</code></pre>

<p>Check out the <a href="https://tomo-deploy.com/configuration/">configuration docs</a> for a complete reference.</p>
<h2 id="usage">Usage</h2>
<p>Tomo gives you easy-to-use commands for three common use cases:</p>
<ol>
<li><code>tomo setup</code> prepares a remote host for its first deploy</li>
<li><code>tomo deploy</code> performs a deployment</li>
<li><code>tomo run</code> lets you invoke one-off tasks</li>
</ol>
<h3 id="setup">Setup</h3>
<p><code>tomo setup</code> prepares the remote host for its first deploy by sequentially running the
<a href="https://tomo-deploy.com/configuration#setupblock">setup</a> list of tasks specified in <code>.tomo/config.rb</code>. These tasks typically create directories, initialize data stores, install prerequisite tools, and perform other one-time actions that are necessary before a deploy can take place.</p>
<p>Out of the box, tomo will:</p>
<ul>
<li>Configure necessary environment variables, like <code>RAILS_ENV</code> and <code>SECRET_KEY_BASE</code></li>
<li>Install Ruby, Bundler, Node, Yarn, and dependencies</li>
<li>Create all necessary deployment directories</li>
<li>Create the Rails database, load the schema, and insert seed data</li>
</ul>
<h3 id="deploy">Deploy</h3>
<p>Whereas <code>tomo setup</code> is typically run once, you can use <code>tomo deploy</code> every time you want to deploy a new version of your app. The deploy command will sequentially run the <a href="https://tomo-deploy.com/configuration#deployblock">deploy</a> list of tasks specified in <code>.tomo/config.rb</code>. You can customize this list to meet the needs of your app. By default, tomo runs these tasks:</p>
<ol>
<li>Create a release (using the <a href="https://tomo-deploy.com/plugins/git#gitcreate_release">git:create_release</a> task)</li>
<li>Build the project (e.g. <a href="https://tomo-deploy.com/plugins/bundler#bundlerinstall">bundler:install</a>, <a href="https://tomo-deploy.com/plugins/rails#railsassets_precompile">rails:assets_precompile</a>)</li>
<li>Migrate data to the meet the requirements of the new release (e.g. <a href="https://tomo-deploy.com/plugins/rails#railsdb_migrate">rails:db_migrate</a>)</li>
<li>Make the new release the &ldquo;current&rdquo; one (<a href="https://tomo-deploy.com/plugins/core#coresymlink_current">core:symlink_current</a>)</li>
<li>Restart the app to use the new current release (e.g. <a href="https://tomo-deploy.com/plugins/puma#pumarestart">puma:restart</a>)</li>
<li>Perform any cleanup (e.g. <a href="https://tomo-deploy.com/plugins/bundler#bundlerclean">bundler:clean</a>)</li>
</ol>
<h3 id="run">Run</h3>
<p>Tomo can also <code>run</code> individual remote tasks on demand. You can use the <code>tasks</code> command to see the list of tasks tomo knows about.</p>
<p><img alt="$ tomo tasks" src="readme_images/tomo-tasks.png" /></p>
<p>One of the built-in Rails tasks is <code>rails:console</code>, which brings up a fully-interactive Rails console over SSH.</p>
<p><img alt="$ tomo run rails:console" src="readme_images/tomo-run-rails-console.png" /></p>
<h3 id="extending-tomo">Extending tomo</h3>
<p>Tomo has many plugins built-in, but you can easily add your own to extend tomo with custom tasks. By convention, custom plugins are stored in <code>.tomo/plugins/</code>. These plugins can define tasks as plain ruby methods. For example:</p>
<pre><code class="ruby"># .tomo/plugins/my-plugin.rb

def hello
  remote.run &quot;echo&quot;, &quot;hello&quot;, settings[:application]
end
</code></pre>

<p>Use <code>remote.run</code> to execute shell scripts on the remote host, similar to how you would use Ruby&rsquo;s <code>system</code>. Project settings are accessible via <code>settings</code>, which is a plain Ruby hash.</p>
<p>Load your plugin in <code>config.rb</code> like this:</p>
<pre><code class="ruby"># .tomo/config.rb

plugin &quot;./plugins/my-plugin.rb&quot;
</code></pre>

<p>And run it!</p>
<p><img alt="$ tomo run my-plugin:hello" src="readme_images/tomo-run-hello.png" /></p>
<p>Read the <a href="https://tomo-deploy.com/tutorials/writing-custom-tasks/">Writing Custom Tasks</a> tutorial for an in-depth guide to extending tomo.</p>
<h2 id="tutorials">Tutorials</h2>
<ul>
<li><a href="https://tomo-deploy.com/tutorials/deploying-rails-from-scratch/">Deploying Rails From Scratch</a></li>
<li><a href="https://tomo-deploy.com/tutorials/writing-custom-tasks/">Writing Custom Tasks</a></li>
<li><a href="https://tomo-deploy.com/tutorials/publishing-a-plugin/">Publishing a Plugin</a></li>
</ul>
<h2 id="reference-documentation">Reference documentation</h2>
<ul>
<li><a href="https://tomo-deploy.com/configuration/">Configuration</a></li>
<li>Commands<ul>
<li><a href="https://tomo-deploy.com/commands/init/">init</a></li>
<li><a href="https://tomo-deploy.com/commands/setup/">setup</a></li>
<li><a href="https://tomo-deploy.com/commands/deploy/">deploy</a></li>
<li><a href="https://tomo-deploy.com/commands/run/">run</a></li>
<li><a href="https://tomo-deploy.com/commands/tasks/">tasks</a></li>
</ul>
</li>
<li>Plugins<ul>
<li><a href="https://tomo-deploy.com/plugins/core/">core</a></li>
<li><a href="https://tomo-deploy.com/plugins/bundler/">bundler</a></li>
<li><a href="https://tomo-deploy.com/plugins/env/">env</a></li>
<li><a href="https://tomo-deploy.com/plugins/git/">git</a></li>
<li><a href="https://tomo-deploy.com/plugins/nodenv/">nodenv</a></li>
<li><a href="https://tomo-deploy.com/plugins/puma/">puma</a></li>
<li><a href="https://tomo-deploy.com/plugins/rails/">rails</a></li>
<li><a href="https://tomo-deploy.com/plugins/rbenv/">rbenv</a></li>
</ul>
</li>
<li>API<ul>
<li><a href="https://tomo-deploy.com/api/Host/">Host</a></li>
<li><a href="https://tomo-deploy.com/api/Logger/">Logger</a></li>
<li><a href="https://tomo-deploy.com/api/Paths/">Paths</a></li>
<li><a href="https://tomo-deploy.com/api/PluginDSL/">PluginDSL</a></li>
<li><a href="https://tomo-deploy.com/api/Remote/">Remote</a></li>
<li><a href="https://tomo-deploy.com/api/Result/">Result</a></li>
<li><a href="https://tomo-deploy.com/api/TaskLibrary/">TaskLibrary</a></li>
<li><a href="https://tomo-deploy.com/api/testing/MockPluginTester/">Testing::MockPluginTester</a></li>
<li><a href="https://tomo-deploy.com/api/testing/DockerPluginTester/">Testing::DockerPluginTester</a></li>
</ul>
</li>
</ul>
<h2 id="faq">FAQ</h2>
<h4 id="what-does-the-unsupported-option-accept-new-error-mean">What does the <code>unsupported option "accept-new"</code> error mean?</h4>
<p>By default, tomo uses the <a href="https://www.openssh.com/txt/release-7.6">&ldquo;accept-new&rdquo;</a> value for the StrictHostKeyChecking option, which is supported by OpenSSH 7.6 and newer. If you are using an older version, this will cause an error. As a workaround, you can override tomo&rsquo;s default behavior like this:</p>
<pre><code class="ruby"># Replace &quot;accept-new&quot; with something compatible with older versions of SSH
set ssh_strict_host_key_checking: true # or false
</code></pre>

<h2 id="support">Support</h2>
<p>This project is a labor of love and I can only spend a few hours a week maintaining it, at most. If you&rsquo;d like to help by submitting a pull request, or if you&rsquo;ve discovered a bug that needs my attention, please let me know. Check out <a href="https://github.com/mattbrictson/tomo/blob/master/CONTRIBUTING.md">CONTRIBUTING.md</a> to get started. Happy hacking! ‚ÄîMatt</p>
<h2 id="license">License</h2>
<p>The gem is available as open source under the terms of the <a href="https://opensource.org/licenses/MIT">MIT License</a>.</p>
<h2 id="code-of-conduct">Code of conduct</h2>
<p>Everyone interacting in the Tomo project‚Äôs codebases, issue trackers, chat rooms and mailing lists is expected to follow the <a href="https://github.com/mattbrictson/tomo/blob/master/CODE_OF_CONDUCT.md">code of conduct</a>.</p>
<h2 id="contribution-guide">Contribution guide</h2>
<p>Interested in filing a bug report, feature request, or opening a PR? Excellent! Please read the short <a href="https://github.com/mattbrictson/tomo/blob/master/CONTRIBUTING.md">CONTRIBUTING.md</a> guidelines before you dive in.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="configuration/" class="btn btn-neutral float-right" title="Configuration">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/mattbrictson/tomo/" class="fa fa-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
      
        <span style="margin-left: 15px"><a href="configuration/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '.';</script>
    <script src="js/theme.js" defer></script>
      <script src="search/main.js" defer></script>

</body>
</html>

<!--
MkDocs version : 1.0.4
Build Date UTC : 2019-11-08 16:45:06
-->
